<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>TRUSTNET 2026 – Admin Dashboard</title>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-storage-compat.js"></script>

<style>
*{box-sizing:border-box;font-family:'Segoe UI',sans-serif}
body{margin:0;background:#eef1f6;padding:40px}
.card{background:#fff;border-radius:16px;padding:30px;box-shadow:0 15px 40px rgba(0,0,0,.08);margin-bottom:30px}
h2{color:#2563EB}
input,button{width:100%;padding:10px;margin:8px 0}
button{background:#2563EB;color:#fff;border:none;border-radius:8px;font-weight:600;cursor:pointer}
.list{margin-top:20px}
.item{display:flex;justify-content:space-between;padding:8px 0;border-bottom:1px solid #ddd}
</style>
</head>

<body>

<h1>TRUSTNET 2026 – Admin Panel</h1>

<div class="card">
  <h2>Add Speaker</h2>
  <input id="spName" placeholder="Speaker Name">
  <input id="spAff" placeholder="Affiliation">
  <input type="file" id="spImg" accept="image/*">
  <button onclick="addSpeaker()">Add Speaker</button>
  <div class="list" id="speakerList"></div>
</div>

<div class="card">
  <h2>Add Publisher</h2>
  <input id="pubName" placeholder="Publisher Name">
  <input type="file" id="pubLogo" accept="image/*">
  <button onclick="addPublisher()">Add Publisher</button>
  <div class="list" id="publisherList"></div>
</div>

<div class="card">
  <h2>Add Partner</h2>
  <input id="partnerName" placeholder="Partner Name">
  <input type="file" id="partnerLogo" accept="image/*">
  <button onclick="addPartner()">Add Partner</button>
  <div class="list" id="partnerList"></div>
</div>

<script>
firebase.initializeApp({
  apiKey: "AIzaSyAZ4sNmHzS6s76eB9O5sa8gvah3n7cXEUQ",
  authDomain: "trustnet-528c2.firebaseapp.com",
  projectId: "trustnet-528c2",
  storageBucket: "trustnet-528c2.appspot.com"
});

const db = firebase.firestore();
const storage = firebase.storage();

/* SPEAKERS */
async function addSpeaker(){
  const n=spName.value, a=spAff.value, f=spImg.files[0];
  if(!n||!a||!f) return alert("Fill all fields");

  const ref = storage.ref(`speakers/${Date.now()}_${f.name}`);
  await ref.put(f);
  const url = await ref.getDownloadURL();

  await db.collection("speakers").add({name:n, affiliation:a, image:url});
  spName.value=""; spAff.value=""; spImg.value="";
}

db.collection("speakers").onSnapshot(s=>{
  speakerList.innerHTML="";
  s.forEach(d=>{
    speakerList.innerHTML+=`
      <div class="item">
        ${d.data().name}
        <button onclick="deleteDoc('speakers','${d.id}')">Delete</button>
      </div>`;
  });
});

/* PUBLISHERS */
async function addPublisher(){
  const n=pubName.value, f=pubLogo.files[0];
  if(!n||!f) return alert("Fill all fields");

  const ref = storage.ref(`publishers/${Date.now()}_${f.name}`);
  await ref.put(f);
  const url = await ref.getDownloadURL();

  await db.collection("publishers").add({name:n, logo:url});
  pubName.value=""; pubLogo.value="";
}

db.collection("publishers").onSnapshot(s=>{
  publisherList.innerHTML="";
  s.forEach(d=>{
    publisherList.innerHTML+=`
      <div class="item">
        ${d.data().name}
        <button onclick="deleteDoc('publishers','${d.id}')">Delete</button>
      </div>`;
  });
});

/* PARTNERS */
async function addPartner(){
  const n=partnerName.value, f=partnerLogo.files[0];
  if(!n||!f) return alert("Fill all fields");

  const ref = storage.ref(`partners/${Date.now()}_${f.name}`);
  await ref.put(f);
  const url = await ref.getDownloadURL();

  await db.collection("partner").add({name:n, logo:url});
  partnerName.value=""; partnerLogo.value="";
}

db.collection("partner").onSnapshot(s=>{
  partnerList.innerHTML="";
  s.forEach(d=>{
    partnerList.innerHTML+=`
      <div class="item">
        ${d.data().name}
        <button onclick="deleteDoc('partner','${d.id}')">Delete</button>
      </div>`;
  });
});

function deleteDoc(col,id){
  db.collection(col).doc(id).delete();
}
</script>

</body>
</html>
